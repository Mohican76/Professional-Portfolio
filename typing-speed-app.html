<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#2c3e50">
    <title>Typing Speed Test</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiVHlwaW5nIFNwZWVkIFRlc3QiLCJzaG9ydF9uYW1lIjoiVHlwaW5nIiwic3RhcnRfdXJsIjoiLiIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNmZmZmZmYiLCJ0aGVtZV9jb2xvciI6IiMyYzNlNTAiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCM2FXUjBhRDBpTWpBd0lpQm9aV2xuYUhROUlqSXdNQ0lnZUcxc2JuTTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURBdmMzWm5JajQ4Y21WamRDQjNhV1IwYUQwaU1qQXdJaUJvWldsbmFIUTlJakl3TUNJZ1ptbHNiRDBpSTJNeU0yVTFNQ0l2UGp3dmMzWm5QZz09Iiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwiLCJwdXJwb3NlIjoiYW55IG1hc2thYmxlIn1dfQ==">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
        }

        .text-display {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 20px;
            font-size: 1.3em;
            line-height: 1.8;
            color: #2c3e50;
            min-height: 150px;
        }

        .text-display.active {
            border-color: #667eea;
        }

        .text-display .correct {
            color: #27ae60;
        }

        .text-display .incorrect {
            color: #e74c3c;
            background-color: #ffebee;
        }

        .text-display .cursor {
            border-left: 2px solid #667eea;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .input-area {
            width: 100%;
            padding: 20px;
            font-size: 1.2em;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            margin-bottom: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .input-area:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-area:disabled {
            background-color: #f0f0f0;
        }

        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .personal-best {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }

        .personal-best h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        .personal-best p {
            color: #856404;
            font-size: 1.1em;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

            h1 {
                font-size: 1.8em;
            }

            .text-display {
                font-size: 1.1em;
                padding: 20px;
            }

            .stat-value {
                font-size: 1.5em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚å®Ô∏è Typing Speed Test</h1>
        
        <div class="stats">
            <div class="stat-box">
                <div class="stat-label">WPM</div>
                <div class="stat-value" id="wpm">0</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Accuracy</div>
                <div class="stat-value" id="accuracy">100%</div>
            </div>
            <div class="stat-box">
                <div class="stat-label">Time</div>
                <div class="stat-value" id="timer">60s</div>
            </div>
        </div>

        <div class="text-display" id="textDisplay"></div>

        <textarea 
            class="input-area" 
            id="inputArea" 
            placeholder="Click 'Start Test' and begin typing..."
            disabled
        ></textarea>

        <div class="controls">
            <button id="startBtn" onclick="startTest()">Start Test</button>
            <button id="resetBtn" onclick="resetTest()">Reset</button>
        </div>

        <div class="personal-best" id="personalBest" style="display: none;">
            <h3>üèÜ Personal Best</h3>
            <p id="bestScore">--</p>
        </div>
    </div>

    <script>
        const sampleTexts = [
            "The quick brown fox jumps over the lazy dog. Pack my box with five dozen liquor jugs. How vexingly quick daft zebras jump. The five boxing wizards jump quickly.",
            "Programming is the art of telling another human what one wants the computer to do. Good code is its own best documentation. Always code as if the person who ends up maintaining your code is a violent psychopath who knows where you live.",
            "Success is not final, failure is not fatal. It is the courage to continue that counts. The only way to do great work is to love what you do. Stay hungry, stay foolish.",
            "Web development is constantly evolving with new frameworks and technologies. Learning to code opens doors to endless possibilities. The best time to start learning was yesterday, the next best time is now."
        ];

        let currentText = '';
        let startTime = null;
        let timerInterval = null;
        let timeLeft = 60;
        let testActive = false;

        const textDisplay = document.getElementById('textDisplay');
        const inputArea = document.getElementById('inputArea');
        const wpmDisplay = document.getElementById('wpm');
        const accuracyDisplay = document.getElementById('accuracy');
        const timerDisplay = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const personalBestDiv = document.getElementById('personalBest');
        const bestScoreDisplay = document.getElementById('bestScore');

        function loadPersonalBest() {
            const best = localStorage.getItem('typingBest');
            if (best) {
                const bestData = JSON.parse(best);
                personalBestDiv.style.display = 'block';
                bestScoreDisplay.textContent = `${bestData.wpm} WPM with ${bestData.accuracy}% accuracy`;
            }
        }

        function savePersonalBest(wpm, accuracy) {
            const current = localStorage.getItem('typingBest');
            if (!current || JSON.parse(current).wpm < wpm) {
                localStorage.setItem('typingBest', JSON.stringify({ wpm, accuracy }));
                loadPersonalBest();
            }
        }

        function startTest() {
            currentText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
            textDisplay.textContent = currentText;
            textDisplay.classList.add('active');
            inputArea.value = '';
            inputArea.disabled = false;
            inputArea.focus();
            timeLeft = 60;
            testActive = true;
            startTime = Date.now();
            startBtn.disabled = true;

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft + 's';
                
                if (timeLeft <= 0) {
                    endTest();
                }
            }, 1000);
        }

        function endTest() {
            clearInterval(timerInterval);
            testActive = false;
            inputArea.disabled = true;
            startBtn.disabled = false;
            textDisplay.classList.remove('active');
            
            const wpm = parseInt(wpmDisplay.textContent);
            const accuracy = parseInt(accuracyDisplay.textContent);
            
            if (wpm > 0) {
                savePersonalBest(wpm, accuracy);
            }
        }

        function resetTest() {
            clearInterval(timerInterval);
            testActive = false;
            currentText = '';
            textDisplay.textContent = '';
            textDisplay.classList.remove('active');
            inputArea.value = '';
            inputArea.disabled = true;
            wpmDisplay.textContent = '0';
            accuracyDisplay.textContent = '100%';
            timerDisplay.textContent = '60s';
            timeLeft = 60;
            startBtn.disabled = false;
        }

        function updateDisplay() {
            const typed = inputArea.value;
            let html = '';
            let correct = 0;
            let total = 0;

            for (let i = 0; i < currentText.length; i++) {
                if (i < typed.length) {
                    total++;
                    if (typed[i] === currentText[i]) {
                        html += `<span class="correct">${currentText[i]}</span>`;
                        correct++;
                    } else {
                        html += `<span class="incorrect">${currentText[i]}</span>`;
                    }
                } else if (i === typed.length) {
                    html += `<span class="cursor">${currentText[i]}</span>`;
                } else {
                    html += currentText[i];
                }
            }

            textDisplay.innerHTML = html;

            // Calculate WPM
            const timeElapsed = (Date.now() - startTime) / 1000 / 60; // in minutes
            const wordsTyped = typed.trim().split(/\s+/).length;
            const wpm = Math.round(wordsTyped / timeElapsed) || 0;
            wpmDisplay.textContent = wpm;

            // Calculate Accuracy
            const accuracy = total > 0 ? Math.round((correct / total) * 100) : 100;
            accuracyDisplay.textContent = accuracy + '%';

            // Check if test complete
            if (typed === currentText) {
                endTest();
            }
        }

        inputArea.addEventListener('input', () => {
            if (testActive) {
                updateDisplay();
            }
        });

        // Prevent paste
        inputArea.addEventListener('paste', (e) => {
            e.preventDefault();
        });

        // Load personal best on page load
        loadPersonalBest();

        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:application/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZnVuY3Rpb24oZXZlbnQpIHsKICBldmVudC53YWl0VW50aWwoc2VsZi5za2lwV2FpdGluZygpKTsKfSk7CgpzZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ2FjdGl2YXRlJywgZnVuY3Rpb24oZXZlbnQpIHsKICBldmVudC53YWl0VW50aWwoc2VsZi5jbGllbnRzLmNsYWltKCkpOwp9KTs=');
        }
    </script>
</body>
</html>